.query-button-group {
  display: inline-flex;
  align-items: center;
  gap: var(--qb-gap);
  margin-left: var(--qb-spacing-sm);

  ::ng-deep {
    .p-button {
      height: var(--qb-button-height);
      padding: var(--qb-padding);
      font-size: var(--qb-font-size);
      border-radius: var(--qb-border-radius);
      border-width: var(--qb-border-width);
      min-width: auto;
      max-width: var(--qb-max-button-width);
      transition: all 0.15s ease;

      .p-button-label {
        font-weight: var(--qb-font-weight-medium);
        white-space: nowrap;
      }

      .p-button-icon {
        font-size: var(--qb-icon-size);
      }

      // Add rule button styling
      &.query-add-rule {
        background-color: var(--green-500);
        border-color: var(--green-500);
        color: white;

        &:hover:not(:disabled) {
          background-color: var(--green-600);
          border-color: var(--green-600);
          transform: translateY(-1px);
        }

        &:focus {
          box-shadow: 0 0 0 0.2rem var(--green-200);
        }
      }

      // Add group button styling
      &.query-add-group {
        background-color: var(--blue-500);
        border-color: var(--blue-500);
        color: white;

        &:hover:not(:disabled) {
          background-color: var(--blue-600);
          border-color: var(--blue-600);
          transform: translateY(-1px);
        }

        &:focus {
          box-shadow: 0 0 0 0.2rem var(--blue-200);
        }
      }

      &.p-button-sm {
        height: var(--qb-button-height-sm);
        padding: var(--qb-padding-sm);
        font-size: var(--qb-font-size-sm);

        .p-button-label {
          font-size: var(--qb-font-size-sm);
        }

        .p-button-icon {
          font-size: var(--qb-icon-size-sm);
        }
      }

      // Icon-only buttons
      &.p-button-icon-only {
        width: var(--qb-button-height);
        padding: 0;

        &.p-button-sm {
          width: var(--qb-button-height-sm);
        }
      }

      // Disabled state
      &:disabled {
        opacity: 0.5;
        cursor: not-allowed;
        transform: none !important;
      }
    }
  }

  // Compact mode adjustments
  .query-builder-compact & {
    gap: var(--qb-spacing-xs);
    margin-left: var(--qb-spacing-xs);

    ::ng-deep {
      .p-button {
        padding: var(--qb-padding-sm);
        font-size: var(--qb-font-size-sm);
        max-width: 100px;

        .p-button-label {
          font-size: var(--qb-font-size-sm);
        }
      }
    }
  }

  // Dense mode adjustments
  .query-builder-dense & {
    gap: 2px;
    margin-left: 2px;

    ::ng-deep {
      .p-button {
        height: var(--qb-button-height-sm);
        padding: 2px 4px;
        font-size: var(--qb-font-size-xs);
        max-width: 80px;

        .p-button-label {
          font-size: var(--qb-font-size-xs);
        }

        .p-button-icon {
          font-size: var(--qb-icon-size-sm);
        }
      }
    }
  }

  // Responsive adjustments
  @media (max-width: 480px) {
    flex-direction: column;
    gap: var(--qb-spacing-xs);
    margin-left: 0;
    margin-top: var(--qb-spacing-sm);

    ::ng-deep {
      .p-button {
        width: 100%;
        max-width: none;
        justify-content: center;
      }
    }
  }

  // Loading state
  &.query-button-group-loading {
    ::ng-deep {
      .p-button {
        opacity: 0.6;
        pointer-events: none;
      }
    }
  }

  // Error state
  &.query-button-group-error {
    ::ng-deep {
      .p-button {
        border-color: var(--red-300);
        color: var(--red-600);

        &:hover:not(:disabled) {
          background-color: var(--red-50);
          border-color: var(--red-400);
        }
      }
    }
  }
}

// Reduced motion support
@media (prefers-reduced-motion: reduce) {
  .query-button-group {
    ::ng-deep {
      .p-button {
        transition: none;

        &:hover:not(:disabled) {
          transform: none;
        }
      }
    }
  }
}