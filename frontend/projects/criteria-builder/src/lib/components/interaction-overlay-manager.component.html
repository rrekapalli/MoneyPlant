<!-- Dropdown Overlay -->
<div class="dropdown-overlay" 
     *ngIf="activeOverlay === 'dropdown'"
     [style.min-width]="overlayConfig.width || '200px'">
  
  <ac-dropdown-content 
    [overlayType]="overlayConfig.dropdownType || 'field'"
    [options]="overlayConfig.options || []"
    [selectedValue]="overlayConfig.selectedValue"
    [fields]="fields"
    [functions]="functions"
    (optionSelect)="onDropdownSelect($event)">
  </ac-dropdown-content>
</div>

<!-- Function Dialog -->
<div class="function-dialog-overlay" 
     *ngIf="showFunctionDialog"
     [style.width]="overlayConfig.width || '600px'"
     [style.height]="overlayConfig.height || 'auto'">
  
  <div class="dialog-header">
    <h3>Configure Function</h3>
    <button type="button" class="close-btn" (click)="onOverlayClose()">Ã—</button>
  </div>
  
  <div class="dialog-content">
    <ac-function-dialog-content
      [functions]="functions"
      [fields]="fields"
      [selectedFunction]="overlayConfig.selectedFunction"
      (functionConfirm)="onFunctionConfirm($event)"
      (functionCancel)="onOverlayClose()">
    </ac-function-dialog-content>
  </div>
</div>

<!-- Context Menu -->
<div class="context-menu-overlay" 
     *ngIf="activeOverlay === 'contextmenu'">
  <ul class="context-menu-items">
    <li *ngFor="let item of contextMenuItems" 
        [class.separator]="item.separator"
        [class.disabled]="item.disabled"
        (click)="item.command && item.command()">
      <i [class]="item.icon" *ngIf="item.icon && !item.separator"></i>
      <span *ngIf="!item.separator">{{ item.label }}</span>
    </li>
  </ul>
</div>

<!-- Value Input Overlay -->
<div class="value-input-overlay" 
     *ngIf="activeOverlay === 'valueInput'"
     [style.min-width]="overlayConfig.width || '250px'">
  
  <ac-value-input-content
    [valueType]="overlayConfig.valueType || 'string'"
    [currentValue]="overlayConfig.currentValue"
    [operator]="overlayConfig.operator || '='"
    [fieldMeta]="overlayConfig.fieldMeta"
    (valueConfirm)="onValueConfirm($event)"
    (valueCancel)="onOverlayClose()">
  </ac-value-input-content>
</div>

<!-- Loading Overlay (for async operations) -->
<div class="overlay-loading" 
     *ngIf="activeOverlay && overlayConfig.loading"
     [style.display]="overlayConfig.loading ? 'flex' : 'none'">
  <div class="spinner"></div>
  <span class="loading-text">{{ overlayConfig.loadingText || 'Loading...' }}</span>
</div>