<div class="validation-display" *ngIf="shouldShowValidation()">
  <!-- Validation Badge -->
  <div 
    class="validation-badge"
    [class]="'badge-position-' + mergedConfig.badgePosition"
    [class.clickable]="mergedConfig.showDetailedOverlay && getTotalIssueCount() > 0"
    [pTooltip]="mergedConfig.showTooltips ? getTooltipText() : ''"
    tooltipPosition="top"
    [tooltipOptions]="{ showDelay: 500, hideDelay: 300 }"
    (click)="onBadgeClick($event)">
    
    <p-badge 
      [value]="getTotalIssueCount().toString()"
      [severity]="getBadgeSeverity()"
      styleClass="validation-badge-content">
      <i [class]="getBadgeIcon()"></i>
    </p-badge>
  </div>

  <!-- Detailed validation info (simplified for now) -->
  <div class="validation-details" *ngIf="overlayVisible && getTotalIssueCount() > 0">
    <div class="validation-summary-popup">
      <div class="validation-header">
        <h4>Validation Issues</h4>
        <button 
          pButton 
          type="button" 
          icon="pi pi-times" 
          class="p-button-text p-button-sm close-button"
          (click)="overlayVisible = false">
        </button>
      </div>

      <!-- Error List -->
      <div class="error-section" *ngIf="chipErrors.length > 0">
        <h5>
          <i class="pi pi-times-circle error-icon"></i>
          Errors ({{ chipErrors.length }})
        </h5>
        
        <div class="issue-list">
          <div 
            class="issue-item error-item"
            *ngFor="let error of chipErrors"
            [class]="getSeverityClass(error.severity)"
            (click)="onErrorClick(error)">
            
            <div class="issue-header">
              <i [class]="getSeverityIcon(error.severity)"></i>
              <span class="issue-code">{{ error.code }}</span>
              <span class="issue-path" *ngIf="error.path">{{ error.path }}</span>
            </div>
            
            <div class="issue-message">{{ error.message }}</div>
            
            <div class="issue-suggestion" *ngIf="error.suggestion">
              <i class="pi pi-lightbulb"></i>
              <span>{{ error.suggestion }}</span>
            </div>
            
            <div class="issue-actions" *ngIf="error.canAutoFix">
              <button 
                pButton 
                type="button" 
                label="Auto Fix" 
                icon="pi pi-wrench"
                class="p-button-sm p-button-outlined"
                (click)="onAutoFixClick(error); $event.stopPropagation()">
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- Warning List -->
      <div class="warning-section" *ngIf="chipWarnings.length > 0">
        <h5>
          <i class="pi pi-exclamation-triangle warning-icon"></i>
          Warnings ({{ chipWarnings.length }})
        </h5>
        
        <div class="issue-list">
          <div 
            class="issue-item warning-item"
            *ngFor="let warning of chipWarnings"
            (click)="onWarningClick(warning)">
            
            <div class="issue-header">
              <i class="pi pi-exclamation-triangle"></i>
              <span class="issue-code">{{ warning.code }}</span>
              <span class="issue-path" *ngIf="warning.path">{{ warning.path }}</span>
            </div>
            
            <div class="issue-message">{{ warning.message }}</div>
            
            <div class="issue-suggestion" *ngIf="warning.suggestion">
              <i class="pi pi-lightbulb"></i>
              <span>{{ warning.suggestion }}</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>