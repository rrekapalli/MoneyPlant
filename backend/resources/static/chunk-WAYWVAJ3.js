import{b as E}from"./chunk-RGYFSMI6.js";import{a as rt,b as st,c as lt}from"./chunk-OGF7L3WK.js";import{a as ct,b as pt,c as dt,d as mt,e as ht}from"./chunk-CP2JDSGT.js";import{A as et,C as it,G as nt,J as ot,n as H,p as J,s as K,v as X,z as tt}from"./chunk-PL4JV4RC.js";import{b as at}from"./chunk-NLSVLC3G.js";import{g as R,i as Q,n as D}from"./chunk-MGIYICR7.js";import{Ha as z,Ia as U,La as Y,Na as G,Pa as Z,ma as V}from"./chunk-RQNRJHRX.js";import{$b as g,Ba as l,Bc as A,Ga as v,Hb as $,Jb as c,Kb as f,Kc as B,Lb as k,Lc as L,Ma as P,Nc as j,Ob as T,Pb as M,Qb as W,Ra as I,Sb as F,T as _,X as C,ac as x,ba as N,bb as m,ca as q,cb as h,fb as S,gb as y,hb as u,ib as a,jb as r,rb as O,tb as w,vb as b}from"./chunk-I5ELLGFI.js";import"./chunk-JKOY2XUY.js";var ft=(()=>{let e=class e{constructor(t){this.apiService=t,this.endpoint="/api/v1/nse-equities"}getAllNseEquities(){return this.apiService.get(this.endpoint)}getNseEquityBySymbol(t){return this.apiService.get(`${this.endpoint}/${t}`)}createNseEquity(t){return this.apiService.post(this.endpoint,t)}updateNseEquity(t,o){return this.apiService.put(`${this.endpoint}/${t}`,o)}deleteNseEquity(t){return this.apiService.delete(`${this.endpoint}/${t}`)}};e.\u0275fac=function(o){return new(o||e)(C(E))},e.\u0275prov=_({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();var vt=(()=>{let e=class e{constructor(t){this.apiService=t,this.endpoint="/api/v1/stock"}getAllStocks(){return this.apiService.get(this.endpoint)}getStockById(t){return this.apiService.get(`${this.endpoint}/${t}`)}getStockBySymbol(t){return this.apiService.get(`${this.endpoint}/symbol/${t}`)}createStock(t){return this.apiService.post(this.endpoint,t)}};e.\u0275fac=function(o){return new(o||e)(C(E))},e.\u0275prov=_({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();var Ct=()=>({width:"100%",height:"75vh"}),bt=(i,e)=>e.id,St=(i,e)=>e.symbol;function yt(i,e){i&1&&(a(0,"tr")(1,"th"),c(2,"Symbol"),r(),a(3,"th"),c(4,"Name"),r(),a(5,"th"),c(6,"Price"),r(),a(7,"th"),c(8,"Change"),r(),a(9,"th"),c(10,"Action"),r()())}function wt(i,e){if(i&1){let s=O();a(0,"tr")(1,"td"),c(2),r(),a(3,"td"),c(4),r(),a(5,"td"),c(6),g(7,"currency"),r(),a(8,"td",14),c(9),g(10,"percent"),r(),a(11,"td")(12,"button",15),w("click",function(){let o=N(s).$implicit,n=b(2);return q(n.addStockFromSearch(o))}),r()()()}if(i&2){let s=e.$implicit;l(2),f(s.symbol),l(2),f(s.name),l(2),f(x(7,5,s.price)),l(2),u("ngClass",s.change>=0?"text-green-500":"text-red-500"),l(),k(" ",x(10,7,s.change)," ")}}function Et(i,e){if(i&1&&(a(0,"div",6)(1,"div"),c(2,"Search Results"),r(),a(3,"p-table",11),I(4,yt,11,0,"ng-template",12)(5,wt,13,9,"ng-template",13),r()()),i&2){let s=b();l(3),u("value",s.searchResults)}}function kt(i,e){if(i&1&&(a(0,"p-tab",9)(1,"span"),c(2),r()()),i&2){let s=e.$index;u("value",s.toString()),l(2),f(s===0?"NSE":s+1)}}function Tt(i,e){i&1&&(a(0,"p-tab",10)(1,"span"),c(2,"NSE"),r()())}function Mt(i,e){i&1&&(a(0,"div",18)(1,"p"),c(2,"Loading NSE equities..."),r()())}function Wt(i,e){if(i&1&&(a(0,"div",21)(1,"div",22)(2,"div",23)(3,"div",24)(4,"div",25),c(5),r()()(),a(6,"div",26)(7,"div",27)(8,"div",28),c(9),g(10,"currency"),r(),a(11,"div",29),c(12),g(13,"percent"),r()()()()()),i&2){let s=e.$implicit;u("pTooltip",s.name),l(5),f(s.symbol),l(4),f(x(10,5,s.price)),l(2),u("ngClass",s.change>=0?"text-green-500":"text-red-500"),l(),k(" ",x(13,7,s.change)," ")}}function Nt(i,e){if(i&1&&(a(0,"div",19),S(1,Wt,14,9,"div",21,St),r()),i&2){let s=b().$implicit;l(),y(s.items)}}function qt(i,e){i&1&&(a(0,"div",20)(1,"p"),c(2,"No stocks in this watchlist yet. Use the search box above to add stocks."),r()())}function Pt(i,e){if(i&1&&(a(0,"p-tabpanel",9)(1,"div",16)(2,"p-scrollPanel")(3,"div",17),m(4,Mt,3,0,"div",18),m(5,Nt,3,0,"div",19),m(6,qt,3,0,"div",20),r()()()()),i&2){let s=e.$implicit,t=e.$index,o=b();u("value",t.toString()),l(2),$(F(6,Ct)),l(2),h(t===0&&o.isLoadingNseEquities?4:-1),l(),h(s.items.length>0&&!(t===0&&o.isLoadingNseEquities)?5:-1),l(),h(s.items.length===0&&!(t===0&&o.isLoadingNseEquities)?6:-1)}}function It(i,e){i&1&&(a(0,"p-tabpanel",10)(1,"div",30)(2,"p"),c(3,"No watchlist found. Create your first watchlist to get started."),r()()())}var ne=(()=>{let e=class e{getCurrentWatchlistIndex(){return parseInt(this.activeTab,10)}constructor(t,o,n,p){this.route=t,this.router=o,this.nseEquityService=n,this.stockService=p,this.watchlists=[],this.nseEquities=[],this.isLoadingNseEquities=!1,this.searchQuery="",this.isSearching=!1,this.searchResults=[],this.activeTab="0"}ngOnInit(){this.loadWatchlists()}loadNseEquities(){this.isLoadingNseEquities=!0,this.nseEquityService.getAllNseEquities().subscribe({next:t=>{this.nseEquities=t,this.isLoadingNseEquities=!1,this.nseEquities.length>0&&this.createNseEquitiesWatchlist(),this.loadWatchlists()},error:t=>{console.error("Failed to load NSE equities:",t),this.isLoadingNseEquities=!1,this.loadWatchlists()}})}createNseEquitiesWatchlist(){let o={id:"nse-equities",name:"NSE Equities",description:"All NSE equities",items:this.nseEquities.map(n=>({symbol:n.symbol,name:n.nameOfCompany,price:0,change:0}))};this.watchlists=[o],this.activeTab="0"}searchStocks(t){if(!t||t.trim()===""){this.searchResults=[];return}this.isSearching=!0;let o=t.toLowerCase().trim();this.searchResults=this.nseEquities.filter(n=>n.symbol.toLowerCase().includes(o)||n.nameOfCompany.toLowerCase().includes(o)).map(n=>({symbol:n.symbol,name:n.nameOfCompany,price:0,change:0})),this.isSearching=!1}addStockFromSearch(t){let o=this.getCurrentWatchlistIndex();if(o===0){console.log("Cannot add stocks to the NSE equities watchlist");return}let n=this.watchlists[o];if(!n)return;if(n.items.some(d=>d.symbol===t.symbol)){console.log(`Stock ${t.symbol} is already in the watchlist`);return}n.items.push(t),this.searchResults=[],this.searchQuery=""}loadWatchlists(){this.stockService.getAllStocks().subscribe({next:t=>{let n={id:"nse-equities",name:"NSE Equities",description:"All NSE equities from the stock API",items:t.map(p=>({symbol:p.symbol,name:p.name,price:0,change:0}))};this.watchlists=[n],this.activeTab="0"},error:t=>{console.error("Failed to load stocks:",t);let o={id:"nse-equities",name:"NSE Equities",description:"All NSE equities from the stock API",items:[]};this.watchlists=[o],this.activeTab="0"}})}};e.\u0275fac=function(o){return new(o||e)(v(R),v(Q),v(ft),v(vt))},e.\u0275cmp=P({type:e,selectors:[["app-watchlist"]],decls:16,vars:5,consts:[[1,"container","mx-auto","p-3"],[1,"col-12","mb-2"],[1,"flex","flex-wrap","gap-1","align-items-center","col-md-11"],["type","text","pInputText","","placeholder","Search for stocks...",1,"mr-2","search-input","col-md-10",3,"ngModelChange","keyup.enter","ngModel"],["type","button","size","small","pButton","","icon","pi pi-search",1,"p-button-sm",3,"click"],[1,"watchlist-view-container"],[1,"mb-4"],[3,"valueChange","value"],[1,"flex"],[3,"value"],["value","0"],["styleClass","p-datatable-sm",3,"value"],["pTemplate","header"],["pTemplate","body"],[3,"ngClass"],["pButton","","icon","pi pi-plus",1,"p-button-sm",3,"click"],[1,"watchlist-container"],[1,"flex","justify-between","items-center","mb-2"],[1,"p-2","text-center","w-full"],[1,"stock-list"],[1,"p-2","text-center"],["tooltipPosition","top",1,"stock-item","p-2","mb-2","border-round","surface-card",3,"pTooltip"],[1,"grid"],[1,"col-12","md:col-6"],[1,"flex","align-items-center"],[1,"stock-symbol","mr-2"],[1,"col-12","md:col-4"],[1,"flex","align-items-center","justify-content-end"],[1,"stock-price","mr-2"],[1,"stock-change",3,"ngClass"],[1,"p-4","text-center"]],template:function(o,n){o&1&&(a(0,"div",0)(1,"div",1)(2,"div",2)(3,"input",3),W("ngModelChange",function(d){return M(n.searchQuery,d)||(n.searchQuery=d),d}),w("keyup.enter",function(){return n.searchStocks(n.searchQuery)}),r(),a(4,"button",4),w("click",function(){return n.searchStocks(n.searchQuery)}),r()()(),a(5,"div",5),m(6,Et,6,1,"div",6),a(7,"p-tabs",7),W("valueChange",function(d){return M(n.activeTab,d)||(n.activeTab=d),d}),a(8,"p-tablist")(9,"div",8),S(10,kt,3,2,"p-tab",9,bt),m(12,Tt,3,0,"p-tab",10),r()(),S(13,Pt,7,7,"p-tabpanel",9,bt),m(15,It,4,0,"p-tabpanel",10),r()()()),o&2&&(l(3),T("ngModel",n.searchQuery),l(3),h(n.searchResults.length>0?6:-1),l(),T("value",n.activeTab),l(3),y(n.watchlists),l(2),h(n.watchlists.length===0?12:-1),l(),y(n.watchlists),l(2),h(n.watchlists.length===0?15:-1))},dependencies:[j,A,X,H,J,K,D,Z,V,G,Y,ot,nt,at,et,tt,it,rt,lt,st,ht,mt,dt,ct,pt,U,z,B,L],styles:["[_nghost-%COMP%]{display:block;height:100%}.text-green-500[_ngcontent-%COMP%]{color:var(--success-color)}.text-red-500[_ngcontent-%COMP%]{color:var(--danger-color)}.container[_ngcontent-%COMP%]{height:75%;display:flex;flex-direction:column}.watchlist-view-container[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;min-height:0}  .bottom-tabs{display:flex;flex-direction:column-reverse;flex:1;min-height:0}  .bottom-tabs .p-tabview-panels{flex:1;overflow:auto;display:flex;flex-direction:column;border-bottom:1px solid var(--surface-border, #dee2e6);border-top:none}  .bottom-tabs .p-tabview-panel{height:100%;overflow:auto}  .bottom-tabs .p-tabview-nav{justify-content:center;margin-top:var(--spacing-xl);border-top:1px solid var(--surface-border, #dee2e6);border-bottom:none}  .bottom-tabs .p-tabview-nav li{margin-top:-1px}  .bottom-tabs .p-tabview-nav li .p-tabview-nav-link{border-radius:0 0 4px 4px;border-top:none;border-bottom:1px solid var(--surface-border, #dee2e6);padding:var(--p-tabs-tab-padding)}  .bottom-tabs .p-tabview-nav li.p-highlight .p-tabview-nav-link{border-color:var(--surface-border, #dee2e6);border-top:none;border-bottom-color:var(--info-color, #3B82F6)}.stock-list[_ngcontent-%COMP%]{flex:1;overflow:auto}.stock-item[_ngcontent-%COMP%]{transition:all .2s;box-shadow:0 2px 4px #0000000d}.stock-item[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 8px #0000001a}.stock-symbol[_ngcontent-%COMP%]{font-family:Courier New,monospace}.watchlist-container[_ngcontent-%COMP%], .portfolio-container[_ngcontent-%COMP%]{padding:var(--spacing-xl);height:100%;display:flex;flex-direction:column;overflow:auto}.view-mode-selector[_ngcontent-%COMP%]{display:flex;align-items:center}.inline-radio[_ngcontent-%COMP%]{display:inline-flex;align-items:center;margin-right:var(--spacing-xl)}  .p-radiobutton{margin-right:var(--spacing-md)}  .p-radiobutton-label{margin-bottom:0}  .p-scrollpanel .p-scrollpanel-wrapper{border-radius:4px}  .p-scrollpanel .p-scrollpanel-bar{background-color:#3b82f64d;border-radius:4px}  .p-scrollpanel .p-scrollpanel-bar:hover{background-color:#3b82f680}.search-input[_ngcontent-%COMP%]{width:200px;font-size:.875rem;min-width:150px}@media (max-width: 768px){.search-input[_ngcontent-%COMP%]{width:150px;min-width:120px}}@media (max-width: 576px){.search-input[_ngcontent-%COMP%]{width:120px;min-width:100px}}"]});let i=e;return i})();export{ne as WatchlistComponent};
