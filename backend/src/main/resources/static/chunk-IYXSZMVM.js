import{b as at}from"./chunk-DMPMDD2A.js";import{a as ut}from"./chunk-66GBNY6X.js";import{a as rt,b as st,c as lt}from"./chunk-XIRLSLUI.js";import{a as G}from"./chunk-NBMXCGLL.js";import{a as ct,b as pt,c as mt,e as dt,f as ht}from"./chunk-ZIWCRGVR.js";import{k as it,p as nt,s as ot}from"./chunk-4EIXSAPM.js";import{h as tt,i as et}from"./chunk-E2A6ZCMF.js";import{a as V,b as z}from"./chunk-YETWNNB4.js";import{Ba as Y,Sa as Z,ba as D,za as U}from"./chunk-IDZOVNAK.js";import"./chunk-6DF6NXBA.js";import{c as H,f as J,j as K,v as X}from"./chunk-RSWLFW5Q.js";import{i as j,k as R,p as Q}from"./chunk-AR7LHXST.js";import{Da as l,Fc as L,Ia as v,Jb as O,Lb as c,Mb as f,Nb as S,Oa as q,Qb as w,Rb as E,Rc as $,Sb as k,Sc as A,Ta as P,U as T,Uc as B,Wb as F,Y as M,ca as W,da as N,db as d,dc as g,eb as h,ec as x,hb as _,ib as C,jb as u,kb as o,lb as r,tb as I,vb as y,xb as b}from"./chunk-53IN4TFO.js";import"./chunk-GAL4ENT6.js";var ft=(()=>{let i=class i{constructor(e){this.apiService=e,this.endpoint="/api/v1/nse-equities"}getAllNseEquities(){return this.apiService.get(this.endpoint)}getNseEquityBySymbol(e){return this.apiService.get(`${this.endpoint}/${e}`)}createNseEquity(e){return this.apiService.post(this.endpoint,e)}updateNseEquity(e,a){return this.apiService.put(`${this.endpoint}/${e}`,a)}deleteNseEquity(e){return this.apiService.delete(`${this.endpoint}/${e}`)}};i.\u0275fac=function(a){return new(a||i)(M(G))},i.\u0275prov=T({token:i,factory:i.\u0275fac,providedIn:"root"});let t=i;return t})();var xt=()=>({width:"100%",height:"75vh"}),vt=(t,i)=>i.id,_t=(t,i)=>i.symbol;function Ct(t,i){t&1&&(o(0,"tr")(1,"th"),c(2,"Symbol"),r(),o(3,"th"),c(4,"Name"),r(),o(5,"th"),c(6,"Price"),r(),o(7,"th"),c(8,"Change"),r(),o(9,"th"),c(10,"Action"),r()())}function yt(t,i){if(t&1){let s=I();o(0,"tr")(1,"td"),c(2),r(),o(3,"td"),c(4),r(),o(5,"td"),c(6),g(7,"currency"),r(),o(8,"td",14),c(9),g(10,"percent"),r(),o(11,"td")(12,"button",15),y("click",function(){let a=W(s).$implicit,n=b(2);return N(n.addStockFromSearch(a))}),r()()()}if(t&2){let s=i.$implicit;l(2),f(s.symbol),l(2),f(s.name),l(2),f(x(7,5,s.price)),l(2),u("ngClass",s.change>=0?"text-green-500":"text-red-500"),l(),S(" ",x(10,7,s.change)," ")}}function St(t,i){if(t&1&&(o(0,"div",6)(1,"div"),c(2,"Search Results"),r(),o(3,"p-table",11),P(4,Ct,11,0,"ng-template",12)(5,yt,13,9,"ng-template",13),r()()),t&2){let s=b();l(3),u("value",s.searchResults)}}function wt(t,i){if(t&1&&(o(0,"p-tab",9)(1,"span"),c(2),r()()),t&2){let s=i.$index;u("value",s.toString()),l(2),f(s===0?"NSE":s+1)}}function Et(t,i){t&1&&(o(0,"p-tab",10)(1,"span"),c(2,"NSE"),r()())}function kt(t,i){t&1&&(o(0,"div",18)(1,"p"),c(2,"Loading NSE equities..."),r()())}function Tt(t,i){if(t&1&&(o(0,"div",21)(1,"div",22)(2,"div",23)(3,"div",24)(4,"div",25),c(5),r()()(),o(6,"div",26)(7,"div",27)(8,"div",28),c(9),g(10,"currency"),r(),o(11,"div",29),c(12),g(13,"percent"),r()()()()()),t&2){let s=i.$implicit;u("pTooltip",s.name),l(5),f(s.symbol),l(4),f(x(10,5,s.price)),l(2),u("ngClass",s.change>=0?"text-green-500":"text-red-500"),l(),S(" ",x(13,7,s.change)," ")}}function Mt(t,i){if(t&1&&(o(0,"div",19),_(1,Tt,14,9,"div",21,_t),r()),t&2){let s=b().$implicit;l(),C(s.items)}}function Wt(t,i){t&1&&(o(0,"div",20)(1,"p"),c(2,"No stocks in this watchlist yet. Use the search box above to add stocks."),r()())}function Nt(t,i){if(t&1&&(o(0,"p-tabpanel",9)(1,"div",16)(2,"p-scrollPanel")(3,"div",17),d(4,kt,3,0,"div",18),d(5,Mt,3,0,"div",19),d(6,Wt,3,0,"div",20),r()()()()),t&2){let s=i.$implicit,e=i.$index,a=b();u("value",e.toString()),l(2),O(F(6,xt)),l(2),h(e===0&&a.isLoadingNseEquities?4:-1),l(),h(s.items.length>0&&!(e===0&&a.isLoadingNseEquities)?5:-1),l(),h(s.items.length===0&&!(e===0&&a.isLoadingNseEquities)?6:-1)}}function qt(t,i){t&1&&(o(0,"p-tabpanel",10)(1,"div",30)(2,"p"),c(3,"No watchlist found. Create your first watchlist to get started."),r()()())}var ne=(()=>{let i=class i{getCurrentWatchlistIndex(){return parseInt(this.activeTab,10)}constructor(e,a,n,p){this.route=e,this.router=a,this.nseEquityService=n,this.stockService=p,this.watchlists=[],this.nseEquities=[],this.isLoadingNseEquities=!1,this.searchQuery="",this.isSearching=!1,this.searchResults=[],this.activeTab="0"}ngOnInit(){this.loadWatchlists()}loadNseEquities(){this.isLoadingNseEquities=!0,this.nseEquityService.getAllNseEquities().subscribe({next:e=>{this.nseEquities=e,this.isLoadingNseEquities=!1,this.nseEquities.length>0&&this.createNseEquitiesWatchlist(),this.loadWatchlists()},error:e=>{console.error("Failed to load NSE equities:",e),this.isLoadingNseEquities=!1,this.loadWatchlists()}})}createNseEquitiesWatchlist(){let a={id:"nse-equities",name:"NSE Equities",description:"All NSE equities",items:this.nseEquities.map(n=>({symbol:n.symbol,name:n.nameOfCompany,price:0,change:0}))};this.watchlists=[a],this.activeTab="0"}searchStocks(e){if(!e||e.trim()===""){this.searchResults=[];return}this.isSearching=!0;let a=e.toLowerCase().trim();this.searchResults=this.nseEquities.filter(n=>n.symbol.toLowerCase().includes(a)||n.nameOfCompany.toLowerCase().includes(a)).map(n=>({symbol:n.symbol,name:n.nameOfCompany,price:0,change:0})),this.isSearching=!1}addStockFromSearch(e){let a=this.getCurrentWatchlistIndex();if(a===0){console.log("Cannot add stocks to the NSE equities watchlist");return}let n=this.watchlists[a];if(!n)return;if(n.items.some(m=>m.symbol===e.symbol)){console.log(`Stock ${e.symbol} is already in the watchlist`);return}n.items.push(e),this.searchResults=[],this.searchQuery=""}loadWatchlists(){this.stockService.getAllStocks().subscribe({next:e=>{let n={id:"nse-equities",name:"NSE Equities",description:"All NSE equities from the stock API",items:e.map(p=>({symbol:p.symbol,name:p.name,price:0,change:0}))};this.watchlists=[n],this.activeTab="0"},error:e=>{console.error("Failed to load stocks:",e);let a={id:"nse-equities",name:"NSE Equities",description:"All NSE equities from the stock API",items:[]};this.watchlists=[a],this.activeTab="0"}})}};i.\u0275fac=function(a){return new(a||i)(v(j),v(R),v(ft),v(ut))},i.\u0275cmp=q({type:i,selectors:[["app-watchlist"]],decls:16,vars:5,consts:[[1,"container","mx-auto","p-3"],[1,"col-12","mb-2"],[1,"flex","flex-wrap","gap-1","align-items-center","col-md-11"],["type","text","pInputText","","placeholder","Search for stocks...",1,"mr-2","search-input","col-md-10",3,"ngModelChange","keyup.enter","ngModel"],["type","button","size","small","pButton","","icon","pi pi-search",1,"p-button-sm",3,"click"],[1,"watchlist-view-container"],[1,"mb-4"],[3,"valueChange","value"],[1,"flex"],[3,"value"],["value","0"],["styleClass","p-datatable-sm",3,"value"],["pTemplate","header"],["pTemplate","body"],[3,"ngClass"],["pButton","","icon","pi pi-plus",1,"p-button-sm",3,"click"],[1,"watchlist-container"],[1,"flex","justify-between","items-center","mb-2"],[1,"p-2","text-center","w-full"],[1,"stock-list"],[1,"p-2","text-center"],["tooltipPosition","top",1,"stock-item","p-2","mb-2","border-round","surface-card",3,"pTooltip"],[1,"grid"],[1,"col-12","md:col-6"],[1,"flex","align-items-center"],[1,"stock-symbol","mr-2"],[1,"col-12","md:col-4"],[1,"flex","align-items-center","justify-content-end"],[1,"stock-price","mr-2"],[1,"stock-change",3,"ngClass"],[1,"p-4","text-center"]],template:function(a,n){a&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"input",3),k("ngModelChange",function(m){return E(n.searchQuery,m)||(n.searchQuery=m),m}),y("keyup.enter",function(){return n.searchStocks(n.searchQuery)}),r(),o(4,"button",4),y("click",function(){return n.searchStocks(n.searchQuery)}),r()()(),o(5,"div",5),d(6,St,6,1,"div",6),o(7,"p-tabs",7),k("valueChange",function(m){return E(n.activeTab,m)||(n.activeTab=m),m}),o(8,"p-tablist")(9,"div",8),_(10,wt,3,2,"p-tab",9,vt),d(12,Et,3,0,"p-tab",10),r()(),_(13,Nt,7,7,"p-tabpanel",9,vt),d(15,qt,4,0,"p-tabpanel",10),r()()()),a&2&&(l(3),w("ngModel",n.searchQuery),l(3),h(n.searchResults.length>0?6:-1),l(),w("value",n.activeTab),l(3),C(n.watchlists),l(2),h(n.watchlists.length===0?12:-1),l(),C(n.watchlists),l(2),h(n.watchlists.length===0?15:-1))},dependencies:[B,L,X,H,J,K,Q,Z,D,Y,U,ot,nt,at,et,tt,it,rt,lt,st,ht,dt,mt,ct,pt,z,V,$,A],styles:["[_nghost-%COMP%]{display:block;height:100%}.text-green-500[_ngcontent-%COMP%]{color:var(--success-color)}.text-red-500[_ngcontent-%COMP%]{color:var(--danger-color)}.container[_ngcontent-%COMP%]{height:75%;display:flex;flex-direction:column}.watchlist-view-container[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;min-height:0}  .bottom-tabs{display:flex;flex-direction:column-reverse;flex:1;min-height:0}  .bottom-tabs .p-tabview-panels{flex:1;overflow:auto;display:flex;flex-direction:column;border-bottom:1px solid var(--surface-border, #dee2e6);border-top:none}  .bottom-tabs .p-tabview-panel{height:100%;overflow:auto}  .bottom-tabs .p-tabview-nav{justify-content:center;margin-top:var(--spacing-xl);border-top:1px solid var(--surface-border, #dee2e6);border-bottom:none}  .bottom-tabs .p-tabview-nav li{margin-top:-1px}  .bottom-tabs .p-tabview-nav li .p-tabview-nav-link{border-radius:0 0 4px 4px;border-top:none;border-bottom:1px solid var(--surface-border, #dee2e6);padding:var(--p-tabs-tab-padding)}  .bottom-tabs .p-tabview-nav li.p-highlight .p-tabview-nav-link{border-color:var(--surface-border, #dee2e6);border-top:none;border-bottom-color:var(--info-color, #3B82F6)}.stock-list[_ngcontent-%COMP%]{flex:1;overflow:auto}.stock-item[_ngcontent-%COMP%]{transition:all .2s;box-shadow:0 2px 4px #0000000d}.stock-item[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 8px #0000001a}.stock-symbol[_ngcontent-%COMP%]{font-family:Courier New,monospace}.watchlist-container[_ngcontent-%COMP%], .portfolio-container[_ngcontent-%COMP%]{padding:var(--spacing-xl);height:100%;display:flex;flex-direction:column;overflow:auto}.view-mode-selector[_ngcontent-%COMP%]{display:flex;align-items:center}.inline-radio[_ngcontent-%COMP%]{display:inline-flex;align-items:center;margin-right:var(--spacing-xl)}  .p-radiobutton{margin-right:var(--spacing-md)}  .p-radiobutton-label{margin-bottom:0}  .p-scrollpanel .p-scrollpanel-wrapper{border-radius:4px}  .p-scrollpanel .p-scrollpanel-bar{background-color:#3b82f64d;border-radius:4px}  .p-scrollpanel .p-scrollpanel-bar:hover{background-color:#3b82f680}.search-input[_ngcontent-%COMP%]{width:200px;font-size:.875rem;min-width:150px}@media (max-width: 768px){.search-input[_ngcontent-%COMP%]{width:150px;min-width:120px}}@media (max-width: 576px){.search-input[_ngcontent-%COMP%]{width:120px;min-width:100px}}"]});let t=i;return t})();export{ne as WatchlistComponent};
