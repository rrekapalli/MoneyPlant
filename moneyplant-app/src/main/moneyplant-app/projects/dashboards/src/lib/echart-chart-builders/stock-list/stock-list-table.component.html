<p-card>
    <!-- Main stock table -->
    <p-table
            [value]="stocks"
            [globalFilterFields]="['symbol', 'companyName', 'industry', 'sector']"
            [scrollable]="true"
            scrollHeight="600px"
            styleClass="p-datatable-sm"
            selectionMode="single">

        <ng-template pTemplate="header">
            <tr>
                <th pSortableColumn="symbol" style="min-width: 120px">
                    Symbol
                    <p-sortIcon field="symbol"></p-sortIcon>
                </th>
                <th pSortableColumn="lastPrice" style="min-width: 100px" class="text-right">
                    Last Price
                    <p-sortIcon field="lastPrice"></p-sortIcon>
                </th>
                <th pSortableColumn="priceChange" style="min-width: 100px" class="text-right">
                    Change
                    <p-sortIcon field="priceChange"></p-sortIcon>
                </th>
                <th pSortableColumn="percentChange" style="min-width: 100px" class="text-right">
                    Change %
                    <p-sortIcon field="percentChange"></p-sortIcon>
                </th>
            </tr>
        </ng-template>

        <ng-template pTemplate="body" let-stock>
            <tr class="stock-row cursor-pointer" (click)="onRowClick(stock)">
                <td>
                    <span [ngClass]="{'font-semibold': true}">{{ stock.symbol }}</span>
                </td>
                <td class="text-right">
                    <span [ngClass]="{'font-semibold': true}">₹{{ stock.lastPrice | number:'1.2-2' }}</span>
                </td>
                <td class="text-right">
                    <span [ngClass]="{
                      'font-semibold': true,
                      'text-green-500': stock.priceChange >= 0,
                      'text-red-500': stock.priceChange < 0
                    }">
                      {{ stock.priceChange >= 0 ? '+' : '' }}₹{{ stock.priceChange | number:'1.2-2' }}
                    </span>
                </td>
                <td class="text-right">
                    <span [ngClass]="{
                      'font-semibold': true,
                      'text-green-500': stock.percentChange >= 0,
                      'text-red-500': stock.percentChange < 0
                    }">
                      {{ stock.percentChange >= 0 ? '+' : '' }}{{ stock.percentChange | number:'1.2-2' }}%
                    </span>
                </td>
            </tr>
        </ng-template>

        <ng-template pTemplate="emptymessage">
            <tr>
                <td colspan="9" class="text-center p-4">
                    <div class="flex flex-column align-items-center gap-3">
                        <i class="pi pi-chart-line text-4xl text-400"></i>
                        <span class="text-lg text-600">No stock data available</span>
                        <p-button
                                label="Load Sample Data"
                                icon="pi pi-plus"
                                (onClick)="loadSampleData()"
                                size="small">
                        </p-button>
                    </div>
                </td>
            </tr>
        </ng-template>
    </p-table>
</p-card>