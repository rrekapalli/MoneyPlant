import{d as O}from"./chunk-HKQY626W.js";import{i as D,k as A,p as L}from"./chunk-BCYXNNE7.js";import{$a as v,Ab as g,Fc as w,Hc as B,Ic as F,Ka as r,Nc as T,Ob as i,Pa as E,Pb as p,Qb as u,Rb as y,Rc as V,Sb as M,Va as I,Zb as _,aa as h,ba as b,ec as d,fc as f,gc as c,qb as x,rb as t,sb as e,xb as S,zb as k}from"./chunk-E5FNFP2Z.js";import"./chunk-JKOY2XUY.js";var N=(a,l)=>({"bg-green-100":a,"bg-red-100":l}),C=(a,l)=>({"text-green-600":a,"text-red-600":l});function j(a,l){a&1&&(t(0,"div",7)(1,"div",8)(2,"div",9)(3,"span",10),i(4,"Loading..."),e()(),t(5,"p",11),i(6,"Loading market data..."),e()()())}function P(a,l){if(a&1&&(t(0,"div",12)(1,"strong"),i(2,"Error:"),e(),i(3),e()),a&2){let n=g();r(3),u(" ",n.error," ")}}function G(a,l){if(a&1&&(t(0,"div",23)(1,"h4",24),i(2),e(),t(3,"p",25),i(4),d(5,"number"),e(),t(6,"p",26),i(7),d(8,"number"),d(9,"number"),e()()),a&2){let n=l.$implicit;x("ngClass",_(16,N,n.change>0,n.change<0)),r(2),p(n.indexName),r(2),p(c(5,7,n.value,"1.2-2")),r(2),x("ngClass",_(19,C,n.change>0,n.change<0)),r(),M(" ",n.change>0?"+":"","",c(8,10,n.change,"1.2-2")," (",c(9,13,n.changePercent*100,"1.2-2"),"%) ")}}function R(a,l){if(a&1){let n=S();t(0,"tr",27)(1,"td",28),i(2),e(),t(3,"td",29),i(4),e(),t(5,"td",20),i(6),d(7,"number"),e(),t(8,"td",30),i(9),d(10,"number"),e(),t(11,"td",20),i(12),d(13,"number"),e(),t(14,"td",20),i(15),d(16,"number"),e(),t(17,"td",21)(18,"button",31),k("click",function(){let m=h(n).$implicit,s=g(2);return b(s.viewStockDetails(m.symbol))}),i(19," View "),e()()()}if(a&2){let n=l.$implicit;r(2),p(n.symbol),r(2),p(n.name),r(2),p(c(7,6,n.price,"1.2-2")),r(3),u(" +",c(10,9,n.change*100,"1.2-2"),"% "),r(3),p(f(13,12,n.volume)),r(3),u("",c(16,14,n.marketCap/1e9,"1.0-1"),"B")}}function q(a,l){if(a&1){let n=S();t(0,"tr",27)(1,"td",28),i(2),e(),t(3,"td",29),i(4),e(),t(5,"td",20),i(6),d(7,"number"),e(),t(8,"td",32),i(9),d(10,"number"),e(),t(11,"td",20),i(12),d(13,"number"),e(),t(14,"td",20),i(15),d(16,"number"),e(),t(17,"td",21)(18,"button",31),k("click",function(){let m=h(n).$implicit,s=g(2);return b(s.viewStockDetails(m.symbol))}),i(19," View "),e()()()}if(a&2){let n=l.$implicit;r(2),p(n.symbol),r(2),p(n.name),r(2),p(c(7,6,n.price,"1.2-2")),r(3),u(" ",c(10,9,n.change*100,"1.2-2"),"% "),r(3),p(f(13,12,n.volume)),r(3),u("",c(16,14,n.marketCap/1e9,"1.0-1"),"B")}}function z(a,l){if(a&1){let n=S();t(0,"tr",27)(1,"td",28),i(2),e(),t(3,"td",29),i(4),e(),t(5,"td",20),i(6),d(7,"number"),e(),t(8,"td",33),i(9),d(10,"number"),e(),t(11,"td",20),i(12),d(13,"number"),e(),t(14,"td",20),i(15),d(16,"number"),e(),t(17,"td",21)(18,"button",31),k("click",function(){let m=h(n).$implicit,s=g(2);return b(s.viewStockDetails(m.symbol))}),i(19," View "),e()()()}if(a&2){let n=l.$implicit;r(2),p(n.symbol),r(2),p(n.name),r(2),p(c(7,8,n.price,"1.2-2")),r(2),x("ngClass",_(19,C,n.change>0,n.change<0)),r(),y(" ",n.change>0?"+":"","",c(10,11,n.change*100,"1.2-2"),"% "),r(3),p(f(13,14,n.volume)),r(3),u("",c(16,16,n.marketCap/1e9,"1.0-1"),"B")}}function H(a,l){if(a&1&&(t(0,"div",5)(1,"div",13)(2,"h3",14),i(3,"Market Summary"),e(),t(4,"div",15),v(5,G,10,22,"div",16),e()(),t(6,"div",13)(7,"h3",14),i(8,"Top Gainers"),e(),t(9,"div",17)(10,"table",18)(11,"thead")(12,"tr")(13,"th",19),i(14,"Symbol"),e(),t(15,"th",19),i(16,"Name"),e(),t(17,"th",20),i(18,"Price"),e(),t(19,"th",20),i(20,"Change %"),e(),t(21,"th",20),i(22,"Volume"),e(),t(23,"th",20),i(24,"Market Cap"),e(),t(25,"th",21),i(26,"Action"),e()()(),t(27,"tbody"),v(28,R,20,17,"tr",22),e()()()(),t(29,"div",13)(30,"h3",14),i(31,"Top Losers"),e(),t(32,"div",17)(33,"table",18)(34,"thead")(35,"tr")(36,"th",19),i(37,"Symbol"),e(),t(38,"th",19),i(39,"Name"),e(),t(40,"th",20),i(41,"Price"),e(),t(42,"th",20),i(43,"Change %"),e(),t(44,"th",20),i(45,"Volume"),e(),t(46,"th",20),i(47,"Market Cap"),e(),t(48,"th",21),i(49,"Action"),e()()(),t(50,"tbody"),v(51,q,20,17,"tr",22),e()()()(),t(52,"div",13)(53,"h3",14),i(54,"Most Active"),e(),t(55,"div",17)(56,"table",18)(57,"thead")(58,"tr")(59,"th",19),i(60,"Symbol"),e(),t(61,"th",19),i(62,"Name"),e(),t(63,"th",20),i(64,"Price"),e(),t(65,"th",20),i(66,"Change %"),e(),t(67,"th",20),i(68,"Volume"),e(),t(69,"th",20),i(70,"Market Cap"),e(),t(71,"th",21),i(72,"Action"),e()()(),t(73,"tbody"),v(74,z,20,22,"tr",22),e()()()()()),a&2){let n=g();r(5),x("ngForOf",n.marketSummary),r(23),x("ngForOf",n.topGainers),r(23),x("ngForOf",n.topLosers),r(23),x("ngForOf",n.mostActive)}}function J(a,l){if(a&1){let n=S();t(0,"div",5)(1,"div",1)(2,"h3",34),i(3),e(),t(4,"div",35)(5,"button",36),k("click",function(){h(n);let m=g();return b(m.backToList())}),i(6," Back to Markets "),e()()(),t(7,"div",37)(8,"div",38)(9,"div")(10,"h4",39),i(11),e(),t(12,"p",40),i(13),d(14,"number"),e(),t(15,"p",41),i(16),d(17,"number"),e()(),t(18,"div",42)(19,"div")(20,"p",43),i(21,"Volume"),e(),t(22,"p",24),i(23),d(24,"number"),e()(),t(25,"div")(26,"p",43),i(27,"Market Cap"),e(),t(28,"p",24),i(29),d(30,"number"),e()()()()()()}if(a&2){let n=g();r(3),u("Stock Details: ",n.selectedStock.symbol),r(8),y("",n.selectedStock.name," (",n.selectedStock.symbol,")"),r(2),p(c(14,9,n.selectedStock.price,"1.2-2")),r(2),x("ngClass",_(20,C,n.selectedStock.change>0,n.selectedStock.change<0)),r(),y(" ",n.selectedStock.change>0?"+":"","",c(17,12,n.selectedStock.change*100,"1.2-2"),"% "),r(7),p(f(24,15,n.selectedStock.volume)),r(6),u("",c(30,17,n.selectedStock.marketCap/1e9,"1.0-1"),"B")}}var ee=(()=>{let l=class l{constructor(o,m,s){this.route=o,this.router=m,this.marketState=s,this.selectedMarketId=null,this.marketSummary=[],this.topGainers=[],this.topLosers=[],this.mostActive=[],this.selectedStock=null,this.loading=!1,this.error=null,this.route.params.subscribe($=>{this.selectedMarketId=$.id||null,this.selectedMarketId&&this.loadStockDetails(this.selectedMarketId)})}ngOnInit(){this.loading=!0,this.loadMarketData()}loadMarketData(){this.marketState.getMarketSummary().subscribe({next:o=>{this.marketSummary=o,this.loading=!1},error:o=>{this.error="Failed to load market summary",this.loading=!1,console.error(o)}}),this.marketState.getTopGainers().subscribe({next:o=>{this.topGainers=o},error:o=>{console.error("Failed to load top gainers:",o)}}),this.marketState.getTopLosers().subscribe({next:o=>{this.topLosers=o},error:o=>{console.error("Failed to load top losers:",o)}}),this.marketState.getMostActive().subscribe({next:o=>{this.mostActive=o},error:o=>{console.error("Failed to load most active stocks:",o)}})}loadStockDetails(o){this.loading=!0,this.marketState.getStockDetails(o).subscribe({next:m=>{this.selectedStock=m,this.loading=!1},error:m=>{this.error=`Failed to load details for ${o}`,this.loading=!1,console.error(m)}})}viewStockDetails(o){this.router.navigate(["/market",o])}onEdit(){}onDelete(){}backToList(){this.router.navigate(["/market"])}};l.\u0275fac=function(m){return new(m||l)(E(D),E(A),E(O))},l.\u0275cmp=I({type:l,selectors:[["app-market"]],decls:9,vars:4,consts:[[1,"container","mx-auto","p-4"],[1,"flex","justify-between","items-center","mb-4"],[1,"m-0"],["class","flex justify-center items-center p-4",4,"ngIf"],["class","bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",4,"ngIf"],[1,"grid","gap-4"],["class","grid gap-4",4,"ngIf"],[1,"flex","justify-center","items-center","p-4"],[1,"text-center"],["role","status",1,"spinner-border"],[1,"sr-only"],[1,"mt-2"],[1,"bg-red-100","border","border-red-400","text-red-700","px-4","py-3","rounded","mb-4"],[1,"bg-white","p-4","rounded","shadow"],[1,"text-xl","font-bold","mb-4"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-4","gap-4"],["class","p-3 border rounded",3,"ngClass",4,"ngFor","ngForOf"],[1,"overflow-x-auto"],[1,"min-w-full","bg-white"],[1,"py-2","px-4","border-b","text-left"],[1,"py-2","px-4","border-b","text-right"],[1,"py-2","px-4","border-b","text-center"],["class","hover:bg-gray-100 cursor-pointer",4,"ngFor","ngForOf"],[1,"p-3","border","rounded",3,"ngClass"],[1,"font-bold"],[1,"text-2xl"],[3,"ngClass"],[1,"hover:bg-gray-100","cursor-pointer"],[1,"py-2","px-4","border-b","font-bold"],[1,"py-2","px-4","border-b"],[1,"py-2","px-4","border-b","text-right","text-green-600"],[1,"bg-blue-500","text-white","px-2","py-1","rounded","hover:bg-blue-600","text-sm",3,"click"],[1,"py-2","px-4","border-b","text-right","text-red-600"],[1,"py-2","px-4","border-b","text-right",3,"ngClass"],[1,"text-xl","font-bold"],[1,"space-x-2"],[1,"bg-gray-500","text-white","px-4","py-2","rounded","hover:bg-gray-600",3,"click"],[1,"bg-white","p-6","rounded","shadow"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6"],[1,"text-2xl","font-bold"],[1,"text-3xl","my-4"],[1,"text-xl",3,"ngClass"],[1,"grid","grid-cols-2","gap-4"],[1,"text-gray-600"]],template:function(m,s){m&1&&(t(0,"div",0)(1,"div",1)(2,"h2",2),i(3,"Markets"),e()(),v(4,j,7,0,"div",3)(5,P,4,1,"div",4),t(6,"div",5),v(7,H,75,4,"div",6)(8,J,31,23,"div",6),e()()),m&2&&(r(4),x("ngIf",s.loading),r(),x("ngIf",s.error),r(2),x("ngIf",!s.selectedMarketId),r(),x("ngIf",s.selectedMarketId&&s.selectedStock))},dependencies:[V,w,B,F,T,L],encapsulation:2});let a=l;return a})();export{ee as MarketComponent};
