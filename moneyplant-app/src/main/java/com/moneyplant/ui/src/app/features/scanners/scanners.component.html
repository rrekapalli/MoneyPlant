<div class="scanners-container">
  <div class="header">
    <h1>Stock Scanners</h1>
    <button pButton label="Create Scanner" icon="pi pi-plus" (click)="createScanner()"></button>
  </div>

  <div class="content">
    <p-card *ngIf="loading" styleClass="loading-card">
      <div class="loading-message">
        <i class="pi pi-spin pi-spinner" style="font-size: 2rem"></i>
        <p>Loading scanners...</p>
      </div>
    </p-card>

    <p-tabView *ngIf="!loading">
      <p-tabPanel header="All Scanners">
        <p-table [value]="scanners" styleClass="p-datatable-sm" [tableStyle]="{'min-width': '50rem'}">
          <ng-template pTemplate="header">
            <tr>
              <th>Name</th>
              <th>Description</th>
              <th>Category</th>
              <th>Last Run</th>
              <th>Results</th>
              <th>Actions</th>
            </tr>
          </ng-template>
          <ng-template pTemplate="body" let-scanner>
            <tr>
              <td>{{ scanner.name }}</td>
              <td>{{ scanner.description }}</td>
              <td>{{ scanner.category }}</td>
              <td>{{ scanner.lastRun | date:'short' }}</td>
              <td>{{ scanner.results }}</td>
              <td>
                <div class="scanner-actions">
                  <button pButton icon="pi pi-play" class="p-button-rounded p-button-sm p-button-success" (click)="runScanner(scanner)" title="Run Scanner"></button>
                  <button pButton icon="pi pi-eye" class="p-button-rounded p-button-sm p-button-info" (click)="viewResults(scanner)" title="View Results"></button>
                  <button pButton icon="pi pi-pencil" class="p-button-rounded p-button-sm p-button-warning" (click)="editScanner(scanner)" title="Edit Scanner"></button>
                  <button pButton icon="pi pi-trash" class="p-button-rounded p-button-sm p-button-danger" (click)="deleteScanner(scanner)" title="Delete Scanner"></button>
                </div>
              </td>
            </tr>
          </ng-template>
          <ng-template pTemplate="emptymessage">
            <tr>
              <td colspan="6">
                <div class="empty-message">
                  <p>No scanners available.</p>
                </div>
              </td>
            </tr>
          </ng-template>
        </p-table>
      </p-tabPanel>

      <p-tabPanel header="Predefined Scanners">
        <p-table [value]="predefinedScanners" styleClass="p-datatable-sm" [tableStyle]="{'min-width': '50rem'}">
          <ng-template pTemplate="header">
            <tr>
              <th>Name</th>
              <th>Description</th>
              <th>Category</th>
              <th>Last Run</th>
              <th>Results</th>
              <th>Actions</th>
            </tr>
          </ng-template>
          <ng-template pTemplate="body" let-scanner>
            <tr>
              <td>{{ scanner.name }}</td>
              <td>{{ scanner.description }}</td>
              <td>{{ scanner.category }}</td>
              <td>{{ scanner.lastRun | date:'short' }}</td>
              <td>{{ scanner.results }}</td>
              <td>
                <div class="scanner-actions">
                  <button pButton icon="pi pi-play" class="p-button-rounded p-button-sm p-button-success" (click)="runScanner(scanner)" title="Run Scanner"></button>
                  <button pButton icon="pi pi-eye" class="p-button-rounded p-button-sm p-button-info" (click)="viewResults(scanner)" title="View Results"></button>
                </div>
              </td>
            </tr>
          </ng-template>
          <ng-template pTemplate="emptymessage">
            <tr>
              <td colspan="6">
                <div class="empty-message">
                  <p>No predefined scanners available.</p>
                </div>
              </td>
            </tr>
          </ng-template>
        </p-table>
      </p-tabPanel>

      <p-tabPanel header="Custom Scanners">
        <p-table [value]="customScanners" styleClass="p-datatable-sm" [tableStyle]="{'min-width': '50rem'}">
          <ng-template pTemplate="header">
            <tr>
              <th>Name</th>
              <th>Description</th>
              <th>Category</th>
              <th>Last Run</th>
              <th>Results</th>
              <th>Actions</th>
            </tr>
          </ng-template>
          <ng-template pTemplate="body" let-scanner>
            <tr>
              <td>{{ scanner.name }}</td>
              <td>{{ scanner.description }}</td>
              <td>{{ scanner.category }}</td>
              <td>{{ scanner.lastRun | date:'short' }}</td>
              <td>{{ scanner.results }}</td>
              <td>
                <div class="scanner-actions">
                  <button pButton icon="pi pi-play" class="p-button-rounded p-button-sm p-button-success" (click)="runScanner(scanner)" title="Run Scanner"></button>
                  <button pButton icon="pi pi-eye" class="p-button-rounded p-button-sm p-button-info" (click)="viewResults(scanner)" title="View Results"></button>
                  <button pButton icon="pi pi-pencil" class="p-button-rounded p-button-sm p-button-warning" (click)="editScanner(scanner)" title="Edit Scanner"></button>
                  <button pButton icon="pi pi-trash" class="p-button-rounded p-button-sm p-button-danger" (click)="deleteScanner(scanner)" title="Delete Scanner"></button>
                </div>
              </td>
            </tr>
          </ng-template>
          <ng-template pTemplate="emptymessage">
            <tr>
              <td colspan="6">
                <div class="empty-message">
                  <p>No custom scanners available.</p>
                </div>
              </td>
            </tr>
          </ng-template>
        </p-table>
      </p-tabPanel>
    </p-tabView>
  </div>
</div>